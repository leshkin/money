<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–ü–æ–¥–µ–ª–∏—Ç—å —Ç—Ä–∞—Ç—ã –ø–æ—Ä–æ–≤–Ω—É</title>
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="manifest.webmanifest">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.2/css/bulma.min.css">
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js').then(function(registration) {
          }, function(err) {
            console.log('ServiceWorker registration failed: ', err);
          });
        });
      }
    </script>
  </head>
  <body>
    <div id="app">
      <section class="hero is-small is-info">
        <div class="hero-body">
          <div class="container">
            <h1 class="title is-5 has-text-centered">
              –£–∫–∞–∂–∏—Ç–µ —Ç—Ä–∞—Ç—ã –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
            </h1>
          </div>
        </div>
      </section>
      <template>
        <section class="hero is-small">
          <div class="hero-body">
            <div class="container">
              <div class="columns is-centered">
                <div class="column is-6-tablet is-5-desktop is-4-widescreen">
                  <div v-for="(person, index) in persons" :key="person.avatar" class="level is-mobile">
                    <div class="level-item">
                      <p class="is-size-4">{{person.avatar}}</p>
                    </div>
                    <div class="level-item">
                      <input v-model.number="person.sum" ref="input" @input="clearTransfers()"
                              class="input" type="number" size="10" placeholder="–°—É–º–º–∞">
                    </div>
                    <div class="level-item">
                      <button :style="{'visibility': index > 1 ? 'visible' : 'hidden'}" @click="remove(person)" class="delete is-large"></button>
                    </div>
                  </div>
                  <div class="level is-mobile">
                    <div class="level-left">
                      <div class="level-item">
                        <button @click="add()" :disabled="!canAdd" class="button is-info">–î–æ–±–∞–≤–∏—Ç—å</button>
                      </div>
                    </div>
                    <div class="level-right">
                      <div class="level-item">
                        <div v-if="canCalc" class="control">
                          <button @click="calc()" class="button is-success">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <article v-if="transfers.length > 0" class="message is-primary is-medium">
                    <div class="message-header">
                      <p>–¢–∞–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞–¥–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å, —á—Ç–æ–±—ã –≤—Å–µ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –ø–æ—Ä–æ–≤–Ω—É</p>
                    </div>
                    <div class="message-body">
                      <p v-for="transfer in transfers" :key="transfer.id" class="has-text-centered">
                        {{transfer.from}} –ø–µ—Ä–µ–≤–æ–¥–∏—Ç <strong>{{transfer.pay}}</strong> –¥–ª—è {{transfer.to}}  
                      </p>
                    </div>
                  </article>
                  <article v-if="showNoTransfers" class="message is-primary is-medium">
                    <div class="message-header">
                      <p>–í—Å–µ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –ø–æ—Ä–æ–≤–Ω—É, –Ω–∏—á–µ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –Ω–µ –Ω–∞–¥–æ!</p>
                    </div>
                    <div class="message-body">
                      <p class="has-text-centered">üëå</p>
                    </div>
                  </article>
                  <article v-if="luckyOnes.length > 0" class="message is-warning is-medium">
                    <div class="message-header">
                      <p v-if="luckyOnes.length > 1">
                        –≠—Ç–∏–º —Ä–µ–±—è—Ç–∞–º –ø–æ–≤–µ–∑–ª–æ, –æ–Ω–∏ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –Ω–∞ 1 —Ä—É–±–ª—å –º–µ–Ω—å—à–µ. –ù–æ –∏–Ω–∞—á–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –∫–æ–ø–µ–π–∫–∞–º–∏. –û, –Ω–µ–µ–µ—Ç!!!
                      </p>
                      <p v-if="luckyOnes.length === 1">
                        –£ –Ω–∞—Å –µ—Å—Ç—å –æ–¥–∏–Ω —Å—á–∞—Å—Ç–ª–∏–≤—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ 1 —Ä—É–±–ª—å –º–µ–Ω—å—à–µ. –ù–æ –∏–Ω–∞—á–µ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –∏–º–µ—Ç—å –¥–µ–ª–æ —Å –∫–æ–ø–µ–π–∫–∞–º–∏. –û, –Ω–µ–µ–µ—Ç!!!
                      </p>
                    </div>
                    <div class="message-body has-text-centered">
                      <span v-for="lucky in luckyOnes" :key="lucky.avatar" class="has-text-centered">
                        {{lucky.avatar}} 
                      </span>
                    </div>
                  </article>
                </div>
              </div>
            </div>
          </div>
        </section>  
      </template>
    </div>
    <script src="index.js"></script>
  </body>
</html>