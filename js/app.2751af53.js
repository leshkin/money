(function(t){function e(e){for(var s,i,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),a("section",{staticClass:"hero is-small"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-centered"},[a("div",{staticClass:"column is-7-tablet is-6-desktop is-5-widescreen"},[a("table",{staticClass:"table is-fullwidth"},[a("tr",[a("td",{staticClass:"has-text-right",attrs:{colspan:"4"}},[a("label",{staticClass:"checkbox has-text-weight-medium is-size-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showNameColumn,expression:"showNameColumn"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.showNameColumn)?t._i(t.showNameColumn,null)>-1:t.showNameColumn},on:{change:function(e){var a=t.showNameColumn,s=e.target,n=!!s.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);s.checked?i<0&&(t.showNameColumn=a.concat([r])):i>-1&&(t.showNameColumn=a.slice(0,i).concat(a.slice(i+1)))}else t.showNameColumn=n}}}),t._v(" показать имена ")])])]),t._l(t.participants,(function(e){return a("tr",{key:e.id},[t.showNameColumn?a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.name,expression:"p.name",modifiers:{number:!0}}],ref:"input",refInFor:!0,staticClass:"input has-text-weight-medium",attrs:{type:"text",placeholder:"Имя"},domProps:{value:e.name},on:{input:[function(a){a.target.composing||t.$set(e,"name",t._n(a.target.value))},function(e){return t.clearTransfers()}],blur:function(e){return t.$forceUpdate()}}})]):t._e(),a("td",[a("span",{staticClass:"is-size-4 has-text-right avatar",on:{click:function(a){return t.addRemoveOne(e)}}},[t._v(t._s(t.showAvatar(e.id)))])]),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"p.sum",modifiers:{number:!0}}],ref:"input",refInFor:!0,staticClass:"input has-text-weight-medium",attrs:{type:"number",size:"5",placeholder:"Сумма"},domProps:{value:e.sum},on:{input:[function(a){a.target.composing||t.$set(e,"sum",t._n(a.target.value))},function(e){return t.clearTransfers()}],blur:function(e){return t.$forceUpdate()}}})]),a("td",{staticClass:"has-text-right"},[a("span",{staticClass:"is-size-7 has-text-right avatar",on:{click:function(a){return t.remove(e)}}},[t._v("❌")])])])}))],2),a("div",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t.canAdd?a("button",{staticClass:"button is-info has-text-weight-semibold",on:{click:function(e){return t.add()}}},[t._v(" Добавить ")]):t._e()])]),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[t.canCalculate?a("button",{staticClass:"button is-success has-text-weight-semibold",on:{click:function(e){return t.calculate()}}},[t._v(" Рассчитать ")]):t._e()])])]),t.transfers.length>0?a("article",{staticClass:"message is-warning is-medium"},[t._m(1),a("div",{staticClass:"message-body has-text-dark"},t._l(t.transfers,(function(e){return a("p",{key:e.id,staticClass:"has-text-centered"},[a("strong",[t._v(t._s(t.showParticipant(e.from)))]),t._v(" переводит "),a("strong",[t._v(t._s(e.pay))]),t._v(" для "),a("strong",[t._v(t._s(t.showParticipant(e.to)))])])})),0)]):t._e(),0===t.transfers.length&&t.complete?a("article",{staticClass:"message is-success is-medium"},[t._m(2),a("div",{staticClass:"message-body has-text-centered"},[t._v("👌")])]):t._e(),t.complete?a("article",{staticClass:"message is-dark is-medium"},[a("div",{staticClass:"message-body"},[a("p",[t._v("Общая сумма "),a("strong",[t._v(t._s(t.sum))]),t._v(", с каждого по "),a("strong",[t._v(t._s(t.share)+".")])])])]):t._e()])])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hero is-small is-info"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title is-5 has-text-centered"},[t._v(" Укажите траты каждого участника ")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",[t._v("Такие переводы надо совершить, чтобы все потратили поровну")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-header"},[a("p",[t._v("Все потратили поровну, ничего переводить не надо!")])])}],i=(a("a623"),a("4de4"),a("7db0"),a("a434"),a("b0c0"),a("13d5"),a("a9e3"),a("35b3"),a("b85c"));function o(t){var e,a=t.reduce((function(t,e){return t+e.sum}),0),s=t.reduce((function(t,e){return t+e.count}),0),n=a/s,r=[],o=[],c=[],u=Object(i["a"])(t);try{for(u.s();!(e=u.n()).done;){var l=e.value,d={id:l.id,pay:l.count*n-l.sum};d.pay>0?o.push(d):c.push(d)}}catch(b){u.e(b)}finally{u.f()}o=o.sort((function(t,e){return e.pay-t.pay})),c=c.sort((function(t,e){return t.pay-e.pay}));var p=0,h=0;while(p<o.length&&h<c.length){var f=o[p].id,m=c[h].id,v=o[p].pay+c[h].pay,_=void 0;v>0?(_=o[p].pay-v,o[p].pay=v,h++):(_=o[p].pay,c[h].pay=v,p++);var g=Math.round(_);g>0&&r.push({from:f,to:m,pay:g})}return{sum:a,share:Math.round(100*(n+Number.EPSILON))/100,transfers:r}}var c={name:"App",data:function(){return{avatars:["😼","🐶","🐮","🦆","🦊","🐷","🐼","🐻","🐗","🦉","🐸","🦀","🍄","🐛","🐟","🦔","🦁","🐭"],participants:[],transfers:[],sum:0,share:0,complete:!1,previousAction:"add",showNameColumn:!1,sequence:1}},computed:{canAdd:function(){return this.avatars.length>0},canCalculate:function(){return this.participants.length>1&&this.participants.every((function(t){return 0===t.sum||t.sum>0}))}},created:function(){var t=this;this._add(),this._add(),this.$nextTick((function(){return t.$refs.input[0].focus()}))},methods:{_add:function(){if(this.avatars.length>0){var t=Math.floor(Math.random()*this.avatars.length);this.participants.push({id:this.sequence++,avatar:this.avatars[t],name:"",sum:null,count:1}),this.avatars.splice(t,1)}},add:function(){var t=this;this.clearTransfers(),this._add(),this.$nextTick((function(){return t.$refs.input[t.participants.length-1].focus()}))},addRemoveOne:function(t){this.clearTransfers(),"add"===this.previousAction?t.count<3?t.count++:(t.count--,this.previousAction="remove"):t.count>1?t.count--:(t.count++,this.previousAction="add")},remove:function(t){this.clearTransfers(),this.avatars.push(t.avatar),this.participants=this.participants.filter((function(e){return e.id!==t.id}))},clearTransfers:function(){this.transfers=[],this.complete=!1},calculate:function(){var t=o(this.participants);this.sum=t.sum,this.share=t.share,this.transfers=t.transfers,this.complete=!0},showAvatar:function(t){for(var e=this.participants.find((function(e){return e.id===t})),a=e.avatar,s=1;s<e.count;s++)a+=e.avatar;return a},showParticipant:function(t){for(var e=this.participants.find((function(e){return e.id===t})),a=(e.name?e.name:"")+e.avatar,s=1;s<e.count;s++)a+=e.avatar;return a}}},u=c,l=(a("d58e"),a("2877")),d=Object(l["a"])(u,n,r,!1,null,"e07391fa",null),p=d.exports;a("eb46");s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(p)}}).$mount("#app")},"5a8a":function(t,e,a){},d58e:function(t,e,a){"use strict";var s=a("5a8a"),n=a.n(s);n.a}});
//# sourceMappingURL=app.2751af53.js.map