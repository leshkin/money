(function(t){function e(e){for(var a,i,c=e[0],o=e[1],u=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(p.length)p.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],a=!0,c=1;c<s.length;c++){var o=s[c];0!==n[o]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},n={app:0},r=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/money/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t._m(0),s("section",{staticClass:"hero is-small"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-7-tablet is-6-desktop is-5-widescreen"},[s("table",{staticClass:"table is-fullwidth"},[s("tr",[s("td",{staticClass:"has-text-right",attrs:{colspan:"4"}},[s("label",{staticClass:"checkbox has-text-weight-medium is-size-6"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.showNameColumn,expression:"showNameColumn"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.showNameColumn)?t._i(t.showNameColumn,null)>-1:t.showNameColumn},on:{change:function(e){var s=t.showNameColumn,a=e.target,n=!!a.checked;if(Array.isArray(s)){var r=null,i=t._i(s,r);a.checked?i<0&&(t.showNameColumn=s.concat([r])):i>-1&&(t.showNameColumn=s.slice(0,i).concat(s.slice(i+1)))}else t.showNameColumn=n}}}),t._v(" показать имена ")])])]),t._l(t.participants,(function(e){return s("tr",{key:e.id},[t.showNameColumn?s("td",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.name,expression:"p.name",modifiers:{number:!0}}],ref:"input",refInFor:!0,staticClass:"input has-text-weight-medium",attrs:{type:"text",placeholder:"Имя"},domProps:{value:e.name},on:{input:[function(s){s.target.composing||t.$set(e,"name",t._n(s.target.value))},function(e){return t.clearTransfers()}],blur:function(e){return t.$forceUpdate()}}})]):t._e(),s("td",[s("span",{staticClass:"is-size-4 has-text-right avatar",on:{click:function(s){return t.addRemoveOne(e)}}},[t._v(t._s(t.showAvatar(e.id)))])]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.sum,expression:"p.sum",modifiers:{number:!0}}],ref:"input",refInFor:!0,staticClass:"input has-text-weight-medium",attrs:{type:"number",size:"5",placeholder:"Сумма"},domProps:{value:e.sum},on:{input:[function(s){s.target.composing||t.$set(e,"sum",t._n(s.target.value))},function(e){return t.clearTransfers()}],blur:function(e){return t.$forceUpdate()}}})]),s("td",{staticClass:"has-text-right"},[s("span",{staticClass:"is-size-7 has-text-right avatar",on:{click:function(s){return t.remove(e)}}},[t._v("❌")])])])}))],2),s("div",{staticClass:"level is-mobile"},[s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[t.canAdd?s("button",{staticClass:"button is-info has-text-weight-semibold",on:{click:function(e){return t.add()}}},[t._v(" Добавить ")]):t._e()])]),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[t.canCalculate?s("button",{staticClass:"button is-success has-text-weight-semibold",on:{click:function(e){return t.calculate()}}},[t._v(" Рассчитать ")]):t._e()])])]),t.transfers.length>0?s("article",{staticClass:"message is-warning is-medium"},[t._m(1),s("div",{staticClass:"message-body has-text-dark"},t._l(t.transfers,(function(e){return s("p",{key:e.id,staticClass:"has-text-centered"},[s("strong",[t._v(t._s(t.showParticipant(e.from)))]),t._v(" переводит "),s("strong",[t._v(t._s(e.pay))]),t._v(" для "),s("strong",[t._v(t._s(t.showParticipant(e.to)))])])})),0)]):t._e(),0===t.transfers.length&&t.complete?s("article",{staticClass:"message is-success is-medium"},[t._m(2),s("div",{staticClass:"message-body has-text-centered"},[t._v("👌")])]):t._e(),t.complete?s("article",{staticClass:"message is-info is-medium"},[t._m(3),s("div",{staticClass:"message-body has-text-dark"},[s("p",[t._v("Общая сумма "),s("strong",[t._v(t._s(t.sum))])]),s("p"),s("p",[t._v("С каждого по "),s("strong",[t._v(t._s(t.share))])])])]):t._e(),t._m(4)])])])])])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"hero is-small is-info"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"title is-5 has-text-centered"},[t._v(" Укажите траты каждого участника ")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-header"},[s("p",[t._v("Такие переводы надо совершить, чтобы все потратили поровну")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-header"},[s("p",[t._v("Все потратили поровну, ничего переводить не надо!")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message-header"},[s("p",[t._v("Для информации")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("article",{staticClass:"message is-dark is-medium"},[s("div",{staticClass:"message-header"},[s("p",[t._v("Знаете ли вы?")])]),s("div",{staticClass:"message-body has-text-dark"},[s("p",[t._v("Кабан🐗 тратит деньги в одиночку. Лисички🦊🦊 — парой, но платит за всё Лис. Кликните на аватарку, чтобы создать группу участников.")])])])}],i=(s("a623"),s("4de4"),s("7db0"),s("a434"),s("b0c0"),s("13d5"),s("a9e3"),s("35b3"),s("b85c"));function c(t){var e,s=t.reduce((function(t,e){return t+e.sum}),0),a=t.reduce((function(t,e){return t+e.count}),0),n=s/a,r=[],c=[],o=[],u=Object(i["a"])(t);try{for(u.s();!(e=u.n()).done;){var l=e.value,d={id:l.id,pay:l.count*n-l.sum};d.pay>0?c.push(d):o.push(d)}}catch(g){u.e(g)}finally{u.f()}c=c.sort((function(t,e){return e.pay-t.pay})),o=o.sort((function(t,e){return t.pay-e.pay}));var p=0,h=0;while(p<c.length&&h<o.length){var m=c[p].id,f=o[h].id,v=c[p].pay+o[h].pay,_=void 0;v>0?(_=c[p].pay-v,c[p].pay=v,h++):(_=c[p].pay,o[h].pay=v,p++);var b=Math.round(_);b>0&&r.push({from:m,to:f,pay:b})}return{sum:s,share:Math.round(100*(n+Number.EPSILON))/100,transfers:r}}var o={name:"App",data:function(){return{avatars:["😼","🐶","🐮","🦆","🦊","🐷","🐼","🐻","🐗","🦉","🐸","🦀","🍄","🐛","🐟","🦔","🦁","🐭"],participants:[],transfers:[],sum:0,share:0,complete:!1,previousAction:"add",showNameColumn:!1,sequence:1}},computed:{canAdd:function(){return this.avatars.length>0},canCalculate:function(){return this.participants.length>1&&this.participants.every((function(t){return 0===t.sum||t.sum>0}))}},created:function(){var t=this;this._add(),this._add(),this.$nextTick((function(){return t.$refs.input[0].focus()}))},methods:{_add:function(){if(this.avatars.length>0){var t=Math.floor(Math.random()*this.avatars.length);this.participants.push({id:this.sequence++,avatar:this.avatars[t],name:"",sum:null,count:1}),this.avatars.splice(t,1)}},add:function(){var t=this;this.clearTransfers(),this._add(),this.$nextTick((function(){return t.$refs.input[t.participants.length-1].focus()}))},addRemoveOne:function(t){this.clearTransfers(),"add"===this.previousAction?t.count<3?t.count++:(t.count--,this.previousAction="remove"):t.count>1?t.count--:(t.count++,this.previousAction="add")},remove:function(t){this.clearTransfers(),this.avatars.push(t.avatar),this.participants=this.participants.filter((function(e){return e.id!==t.id}))},clearTransfers:function(){this.transfers=[],this.complete=!1},calculate:function(){var t=c(this.participants);this.sum=t.sum,this.share=t.share,this.transfers=t.transfers,this.complete=!0},showAvatar:function(t){for(var e=this.participants.find((function(e){return e.id===t})),s=e.avatar,a=1;a<e.count;a++)s+=e.avatar;return s},showParticipant:function(t){for(var e=this.participants.find((function(e){return e.id===t})),s=(e.name?e.name:"")+e.avatar,a=1;a<e.count;a++)s+=e.avatar;return s}}},u=o,l=(s("79ab"),s("2877")),d=Object(l["a"])(u,n,r,!1,null,"460c903a",null),p=d.exports;s("eb46");a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(p)}}).$mount("#app")},"79ab":function(t,e,s){"use strict";var a=s("bf07"),n=s.n(a);n.a},bf07:function(t,e,s){}});
//# sourceMappingURL=app.b77077c3.js.map