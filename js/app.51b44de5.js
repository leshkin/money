(function(t){function e(e){for(var s,r,o=e[0],c=e[1],u=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},n={app:0},i=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/money/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1a8b":function(t,e,a){"use strict";var s=a("dd10"),n=a.n(s);e["default"]=n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=a("8c4f"),i=a("a925"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"columns is-mobile"},[a("div",{staticClass:"column is-one-fifth"}),a("div",{staticClass:"column"},[a("h1",{staticClass:"title is-5 has-text-centered mt-1"},[t._v(" "+t._s(t.$t("header"))+" ")])]),a("div",{staticClass:"column is-one-fifth has-text-right"},["en"===t.locale?a("router-link",{staticClass:"mt-1 mr-1",attrs:{to:"/ru"}},[t._v("🇷🇺")]):t._e(),"ru"===t.locale?a("router-link",{staticClass:"mt-1 mr-1",attrs:{to:"/en"}},[t._v("🇬🇧")]):t._e()],1)]),a("section",{staticClass:"hero is-small"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"columns is-centered"},[a("div",{staticClass:"column is-7-tablet is-6-desktop is-5-widescreen"},[a("table",{staticClass:"table is-fullwidth"},[t._l(t.participants,(function(e){return a("tr",{key:e.id},[t.showNameColumn?a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"p.name"}],staticClass:"input has-text-weight-medium",attrs:{type:"text",placeholder:t.$t("name")},domProps:{value:e.name},on:{input:[function(a){a.target.composing||t.$set(e,"name",a.target.value)},function(e){return t.clearTransfers()}]}})]):t._e(),a("td",[a("span",{staticClass:"is-size-4 has-text-right avatar",on:{click:function(a){return t.addRemoveOneInGroup(e)}}},[t._v(t._s(t.showAvatar(e.id)))])]),a("td",[a("input",{ref:"input",refInFor:!0,staticClass:"input has-text-weight-medium",attrs:{type:"text",inputmode:"tel",placeholder:t.$t("sum")},domProps:{value:e.value},on:{input:function(a){return t.setValue(e,a.target.value)}}}),t.isPlusSign(e)?a("strong",{staticClass:"is-size-6"},[t._v("= "+t._s(e.sum))]):t._e()]),a("td",{staticClass:"has-text-right"},[a("span",{staticClass:"is-size-7 has-text-right avatar",on:{click:function(a){return t.remove(e)}}},[t._v("❌")])])])})),a("tr",[a("td",{staticClass:"has-text-right",attrs:{colspan:"4"}},[a("label",{staticClass:"checkbox has-text-weight-medium is-size-6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showNameColumn,expression:"showNameColumn"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.showNameColumn)?t._i(t.showNameColumn,null)>-1:t.showNameColumn},on:{change:function(e){var a=t.showNameColumn,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=null,r=t._i(a,i);s.checked?r<0&&(t.showNameColumn=a.concat([i])):r>-1&&(t.showNameColumn=a.slice(0,r).concat(a.slice(r+1)))}else t.showNameColumn=n}}}),t._v(" "+t._s(t.$t("show_names"))+" ")])])])],2),a("div",{staticClass:"level is-mobile"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[t.canAdd?a("button",{staticClass:"button is-info has-text-weight-semibold",on:{click:function(e){return t.add()}}},[t._v(" "+t._s(t.$t("add"))+" ")]):t._e()])]),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[t.canCalculate?a("button",{staticClass:"button is-success has-text-weight-semibold",on:{click:function(e){return t.calculate()}}},[t._v(" "+t._s(t.$t("calculate"))+" ")]):t._e()])])]),t.transfers.length>0?a("article",{staticClass:"message is-warning is-medium"},[a("div",{staticClass:"message-header"},[a("p",[t._v(t._s(t.$t("split_spending_equally")))])]),a("div",{staticClass:"message-body has-text-dark"},t._l(t.transfers,(function(e){return a("p",{key:e.id},[a("strong",[t._v(t._s(t.showParticipant(e.from)))]),t._v(" "+t._s(t.$t("transfer"))+" "),a("strong",[t._v(t._s(e.pay))]),t._v(" "+t._s(t.$t("to"))+" "),a("strong",[t._v(t._s(t.showParticipant(e.to)))])])})),0)]):t._e(),0===t.transfers.length&&t.complete?a("article",{staticClass:"message is-success is-medium"},[a("div",{staticClass:"message-header"},[a("p",[t._v(t._s(t.$t("all_spent_equally")))])]),a("div",{staticClass:"message-body has-text-centered"},[t._v("👌")])]):t._e(),t.complete?a("article",{staticClass:"message is-info is-medium"},[a("div",{staticClass:"message-header"},[a("p",[t._v(t._s(t.$t("info")))])]),a("div",{staticClass:"message-body has-text-dark"},[a("p",[t._v(t._s(t.$t("total_participants"))+" "),a("strong",[t._v(t._s(t.allParticipants))])]),a("p",[t._v(t._s(t.$t("total_sum"))+" "),a("strong",[t._v(t._s(t.sum))])]),a("p"),a("p",[t._v(t._s(t.$t("from_each"))+" "),a("strong",[t._v(t._s(t.share))])])])]):t._e(),a("article",{staticClass:"message is-dark is-medium"},[a("div",{staticClass:"message-header"},[a("p",[t._v(t._s(t.$t("do_you_know.title")))])]),a("div",{staticClass:"message-body has-text-dark content"},[a("p",{domProps:{innerHTML:t._s(t.$t("do_you_know.first"))}}),a("p",{domProps:{innerHTML:t._s(t.$t("do_you_know.second"))}})])])])])])])])])},o=[],c=(a("a623"),a("4de4"),a("7db0"),a("c975"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("ac1f"),a("466d"),a("1276"),a("35b3"),a("b85c"));function u(t){var e,a=t.reduce((function(t,e){return t+e.sum}),0),s=t.reduce((function(t,e){return t+e.count}),0),n=a/s,i=[],r=[],o=Object(c["a"])(t);try{for(o.s();!(e=o.n()).done;){var u=e.value,d={id:u.id,pay:u.count*n-u.sum};d.pay>0?i.push(d):r.push(d)}}catch(w){o.e(w)}finally{o.f()}i=i.sort((function(t,e){return e.pay-t.pay})),r=r.sort((function(t,e){return t.pay-e.pay})),l(i,r);var p=[],h=0,f=0;while(h<i.length&&f<r.length){var m=i[h].id,v=r[f].id,_=i[h].pay+r[f].pay,g=void 0;_>0?(g=i[h].pay-_,i[h].pay=_,f++):(g=i[h].pay,r[f].pay=_,h++);var y=Math.round(g);y>0&&p.push({from:m,to:v,pay:y})}return{sum:a,share:Math.round(100*(n+Number.EPSILON))/100,transfers:p}}function l(t,e){var a=0,s=0;while(a<t.length){while(s<e.length){if(t[a].pay+e[s].pay===0){var n=t[a];t.splice(a,1),t.unshift(n),n=e[s],e.splice(s,1),e.unshift(n);break}s++}s=0,a++}}var d={name:"App",data:function(){return{avatars:["😼","🐶","🐮","🦆","🦊","🐷","🐼","🐻","🐗","🦉","🐸","🦀","🍄","🐛","🐟","🦔","🦁","🐭"],participants:[],transfers:[],sum:0,share:0,complete:!1,previousAction:"add",showNameColumn:!1,sequence:1,locale:"en"}},computed:{canAdd:function(){return this.avatars.length>0},canCalculate:function(){return this.participants.length>1&&this.participants.every((function(t){return 0===t.sum||t.sum>0}))},allParticipants:function(){return this.participants.reduce((function(t,e){return t+e.count}),0)}},created:function(){var t=this;"/en"!==this.$router.currentRoute.path&&"/ru"!==this.$router.currentRoute.path&&("ru"===navigator.language.slice(0,2).toLowerCase()?this.$router.push("ru"):this.$router.push("en")),"/ru"===this.$router.currentRoute.path?this.setLocale("ru"):this.setLocale("en"),this.addOneParticipant(),this.addOneParticipant(),this.$nextTick((function(){return t.$refs.input[0].focus()}))},watch:{$route:function(t){"/ru"===t.path?this.setLocale("ru"):this.setLocale("en")}},methods:{addOneParticipant:function(){if(this.avatars.length>0){var t=Math.floor(Math.random()*this.avatars.length);this.participants.push({id:this.sequence++,avatar:this.avatars[t],name:"",sum:null,value:"",count:1}),this.avatars.splice(t,1)}},add:function(){var t=this;this.clearTransfers(),this.addOneParticipant(),this.$nextTick((function(){return t.$refs.input[t.participants.length-1].focus()}))},addRemoveOneInGroup:function(t){this.clearTransfers(),"add"===this.previousAction?t.count<3?t.count++:(t.count--,this.previousAction="remove"):t.count>1?t.count--:(t.count++,this.previousAction="add")},remove:function(t){this.clearTransfers(),this.avatars.push(t.avatar),this.participants=this.participants.filter((function(e){return e.id!==t.id}))},clearTransfers:function(){this.transfers=[],this.complete=!1},calculate:function(){var t=u(this.participants);this.sum=t.sum,this.share=t.share,this.transfers=t.transfers,this.complete=!0},showAvatar:function(t){for(var e=this.participants.find((function(e){return e.id===t})),a=e.avatar,s=1;s<e.count;s++)a+=e.avatar;return a},isPlusSign:function(t){return!!(t.value&&t.value.indexOf("+")>-1)},setValue:function(t,e){if(this.clearTransfers(),e.match(/^[0-9\\+]*$/)){var a=e.split("+").map((function(t){return Number(t)||0}));t.sum=a.reduce((function(t,e){return t+e}),0),t.value=e}},showParticipant:function(t){for(var e=this.participants.find((function(e){return e.id===t})),a=(e.name?e.name+" ":"")+e.avatar,s=1;s<e.count;s++)a+=e.avatar;return a},setLocale:function(t){this.locale=t,this.$i18n.locale=t,document.title=this.$t("title")}}},p=d,h=(a("afd3"),a("2877")),f=a("1a8b"),m=Object(h["a"])(p,r,o,!1,null,"e0d857be",null);"function"===typeof f["default"]&&Object(f["default"])(m);var v=m.exports,_=(a("eb46"),a("9483"));Object(_["a"])("".concat("/money/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading."),window.location.reload()},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),s["a"].config.productionTip=!1,s["a"].use(n["a"]),s["a"].use(i["a"]);var g=new n["a"]({routes:[{path:"/",component:v}]}),y=new i["a"]({locale:"en"});new s["a"]({router:g,i18n:y,render:function(t){return t(v)}}).$mount("#app")},"92da":function(t,e,a){},afd3:function(t,e,a){"use strict";a("92da")},dd10:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"title":"How to split the check equally","header":"Input the spending of each participant","show_names":"show names","name":"Name","sum":"Sum","add":"Add","calculate":"Calculate","split_spending_equally":"Split spending equally","transfer":"transfer","to":"to","all_spent_equally":"All spent equally, nothing to translate!","info":"For information","total_participants":"Total participants","total_sum":"Total sum","from_each":"From each","do_you_know":{"title":"Did you know?","first":"By clicking on the avatar, you can create a group of up to three members. For example, <strong>hog 🐗</strong> spends money alone, and <strong>foxes 🦊🦊</strong> spend money as a couple, but only one of them pays for everything. Therefore, there are three participants in total, and only two are involved in transfers.","second":"In the input fields you can use the <strong>+</strong> symbol to add more expenses."}},"ru":{"title":"Как разделить счет поровну","header":"Укажите траты каждого участника","show_names":"показать имена","name":"Имя","sum":"Сумма","add":"Добавить","calculate":"Рассчитать","split_spending_equally":"Делим траты поровну","transfer":"переводит","to":"для","all_spent_equally":"Все потратили поровну, ничего переводить не надо!","info":"Для информации","total_participants":"Всего участников","total_sum":"Общая сумма","from_each":"С каждого по","do_you_know":{"title":"Знаете ли вы?","first":"Кликнув на аватарку, можно создать группу до трёх участников. Например, <strong>кабанчик 🐗</strong> тратит деньги в одиночку, а <strong>лисички 🦊🦊</strong> — парой, но платит за всё Лис. Поэтому всего участников трое, а в переводах участвуют только двое.","second":"В полях ввода можно использовать символ <strong>+</strong> для сложения трат."}}}'),delete t.options._Ctor}}});
//# sourceMappingURL=app.51b44de5.js.map